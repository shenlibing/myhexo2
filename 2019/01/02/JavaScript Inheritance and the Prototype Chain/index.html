<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="JavaScript Inheritance and the Prototype Chain, 小兵兵">
    <meta name="description" content="参考：
https://tylermcginnis.com/javascript-inheritance-and-the-prototype-chain/
##JavaScript Inheritance and the Prototype">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>JavaScript Inheritance and the Prototype Chain | 小兵兵</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
        code[class*="language-"], pre[class*="language-"] {
            white-space: pre !important;
        }
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">小兵兵</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">小兵兵</div>
        <div class="logo-desc">
            
            言宜慢，心宜善
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/shenlibing/" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/shenlibing/" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>





<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/18.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        JavaScript Inheritance and the Prototype Chain
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/js/" target="_blank">
                                <span class="chip bg-color">js</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/前端/" class="post-category" target="_blank">
                                前端
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-01-02
                </div>

                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>参考：</p>
<p><a href="https://tylermcginnis.com/javascript-inheritance-and-the-prototype-chain/" target="_blank" rel="noopener">https://tylermcginnis.com/javascript-inheritance-and-the-prototype-chain/</a></p>
<p>##JavaScript Inheritance and the Prototype Chain</p>
<p><strong>Post</strong></p>
<p>This post is designed to be read after you read JavaScript Private and Public Class Fields.</p>
<p>Previously we learned how to create an <strong>Animal</strong> class both in <strong>ES5</strong> as well as in <strong>ES6</strong>. We also learned how to share methods across those classes using JavaScript’s prototype. To review, here’s the code we saw in an earlier post.</p>
<pre><code>
    function Animal (name, energy) {
      this.name = name
      this.energy = energy
    }

    Animal.prototype.eat = function (amount) {
      console.log(`${this.name} is eating.`)
      this.energy += amount
    }

    Animal.prototype.sleep = function (length) {
      console.log(`${this.name} is sleeping.`)
      this.energy += length
    }

    Animal.prototype.play = function (length) {
      console.log(`${this.name} is playing.`)
      this.energy -= length
    }

    const leo = new Animal(&#39;Leo&#39;, 7)</code></pre><pre><code>
    class Animal {
      constructor(name, energy) {
        this.name = name
        this.energy = energy
      }
      eat(amount) {
        console.log(`${this.name} is eating.`)
        this.energy += amount
      }
      sleep() {
        console.log(`${this.name} is sleeping.`)
        this.energy += length
      }
      play() {
        console.log(`${this.name} is playing.`)
        this.energy -= length
      }
    }

    const leo = new Animal(&#39;Leo&#39;, 7)
</code></pre><p>Now let’s say we wanted to start making individual classes for specific animals. For example, what if we wanted to start making a bunch of dog instances. What properties and methods will these dogs have? Well, similar to our <strong>Animal</strong> class, we could give each dog a <strong>name</strong>, an <strong>energy</strong> level, and the ability to <strong>eat</strong>, <strong>sleep</strong>, and <strong>play</strong>. Unique to our Dog class, we could also give them a <strong>breed</strong> property as well as the ability to <strong>bark</strong>. In ES5, our <strong>Dog</strong> class could look something like this</p>
<pre><code>
    function Dog (name, energy, breed) {
      this.name = name
      this.energy = energy
      this.breed = breed
    }

    Dog.prototype.eat = function (amount) {
      console.log(`${this.name} is eating.`)
      this.energy += amount
    }

    Dog.prototype.sleep = function (length) {
      console.log(`${this.name} is sleeping.`)
      this.energy += length
    }

    Dog.prototype.play = function (length) {
      console.log(`${this.name} is playing.`)
      this.energy -= length
    }

    Dog.prototype.bark = function () {
      console.log(&#39;Woof-Woof!&#39;)
      this.energy -= .1
    }

    const charlie = new Dog(&#39;Charlie&#39;, 10, &#39;Goldendoodle&#39;)
</code></pre><p>Alright, well… we just recreated the <strong>Animal</strong> class and added a few new properties to it. If we wanted to create another animal, say a <strong>Cat</strong>, at this point we’d again have to create a <strong>Cat</strong> class, duplicate all the common logic located in the <strong>Animal</strong> class to it, then add on <strong>Cat</strong> specific properties just like we did with the <strong>Dog</strong> class. In fact, we’d have to do this for each different type of animal we created.</p>
<pre><code>
    function Dog (name, energy, breed) {}

    function Cat (name, energy, declawed) {}

    function Giraffe (name, energy, height) {}

    function Monkey (name, energy, domesticated) {}</code></pre><p>This work, but it seems wasteful. The <strong>Animal</strong> class is the perfect base class. What that means is that it has all the properties that each one of our animals has in common. Whether we’re creating a dog, cat, giraffe, or monkey, all of them will have a <strong>name</strong>, <strong>energy</strong> level, and the ability to <strong>eat</strong>, <strong>sleep</strong>, and <strong>play</strong>. With that said, is there a way we can utilize the <strong>Animal</strong> class whenever we create the individual classes for each different animal? Let’s try it out. I’ll paste the <strong>Animal</strong> class again below for easy reference.</p>
<pre><code>
    function Animal (name, energy) {
      this.name = name
      this.energy = energy
    }

    Animal.prototype.eat = function (amount) {
      console.log(`${this.name} is eating.`)
      this.energy += amount
    }

    Animal.prototype.sleep = function (length) {
      console.log(`${this.name} is sleeping.`)
      this.energy += length
    }

    Animal.prototype.play = function (length) {
      console.log(`${this.name} is playing.`)
      this.energy -= length
    }

    function Dog (name, energy, breed) {

    }
</code></pre><p>What are some things we know about the <strong>Dog</strong> constructor function above?</p>
<p>First, we know it takes 3 arguments, <strong>name</strong>, <strong>energy</strong>, and <strong>breed</strong>.</p>
<p>Second, we know it’s going to be called with the <strong>new</strong> keyword so we’ll have a <strong>this</strong> object.</p>
<p>And third, we know we need to utilize the <strong>Animal</strong> function so that any instance of dog will have a <strong>name</strong>, <strong>energy</strong> level, and be able to <strong>eat</strong>, <strong>sleep</strong>, and <strong>play</strong>.</p>
<p>It’s the third one that’s the tricky one. The way you “utilize” a function is by calling it. So we know that inside of <strong>Dog</strong>, we want to call <strong>Animal</strong>. What we need to figure out though is how we can invoke <strong>Animal</strong> in the context of <strong>Dog</strong>. What that means it that we want to call <strong>Animal</strong> with the <strong>this</strong> keyword from Dog. If we do that correctly, then <strong>this</strong> inside of the <strong>Dog</strong> function will have all the properties of <strong>Animal</strong> (name, energy). If you remember from a previous section, every function in JavaScript has a <strong>.call</strong> method on it.</p>
<blockquote>
<p>.call() is a method on every function that allows you to invoke the function specifying in what context the function will be invoked.</p>
</blockquote>
<p>This sounds like exactly what we need. We want to invoke <strong>Animal</strong> in the context of <strong>Dog</strong>.</p>
<pre><code>   function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

const charlie = new Dog(&#39;Charlie&#39;, 10, &#39;Goldendoodle&#39;)

charlie.name // Charlie
charlie.energy // 10
charlie.breed // Goldendoodle</code></pre><p>Solid, we’re half-way there. You’ll notice in the code above that because of this line <strong>Animal.call(this, name, energy)</strong>, every instance of <strong>Dog</strong> will now have a <strong>name</strong> and <strong>energy</strong> property. Again, the reason for that is because it’s as if we ran the <strong>Animal</strong> function with the <strong>this</strong> keyword generated from <strong>Dog</strong>. Then after we added a <strong>name</strong> and <strong>energy</strong> property to <strong>this</strong>, we also added a <strong>breed</strong> property just as we normally would.</p>
<p>Remember the goal here is to have each instance of <strong>Dog</strong> have not only all the properties of <strong>Animal</strong>, but also all the methods as well. If you run the code above, you’ll notice that if you try to run <strong>charlie.eat(10)</strong> you’ll get an error. Currently every instance of <strong>Dog</strong> will have the properties of <strong>Animal</strong> (<strong>name</strong> and <strong>energy</strong>), but we haven’t done anything to make sure that they also have the methods (<strong>play, eat, sleep)</strong>.</p>
<p>Let’s think about how we can solve this. We know that all the <strong>Animal</strong>’s methods are located on <strong>Animal.prototype</strong>. What that means is we somehow want to make sure that all instances of <strong>Dog</strong> will have access to the methods on <strong>Animal.prototype</strong>. What if we used our good friend <strong>Object.create</strong> here? If you’ll remember, <strong>Object.create</strong> allows you to create an object which will delegate to another object on failed lookups. So in our case, the object we want to create is going to be <strong>Dog</strong>’s prototype and the object we want to delegate to on failed lookups is <strong>Animal.prototype</strong>.</p>
<pre><code>function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

Dog.prototype = Object.create(Animal.prototype)</code></pre><p>Now, whenever there’s a failed lookup on an instance of <strong>Dog</strong>, JavaScript will delegate that lookup to <strong>Animal.prototype</strong>. If this is still a little fuzzy, re-read A Beginner’s Guide to JavaScript’s Prototype where we talk all about <strong>Object.create</strong> and JavaScript’s prototype.</p>
<p>Let’s look at the full code together then we’ll walk through what happens.</p>
<pre><code>function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

Dog.prototype = Object.create(Animal.prototype)</code></pre><p>Now we’ve created our base class (<strong>Animal</strong>) as well as our subclass (<strong>Dog</strong>), let’s see what it looks like under the hood when we create an instance of <strong>Dog</strong>.</p>
<pre><code>const charlie = new Dog(&#39;Charlie&#39;, 10, &#39;Goldendoodle&#39;)

charlie.name // Charlie
charlie.energy // 10
charlie.breed // Goldendoodle</code></pre><p>Nothing fancy so far, but let’s look at what happens when we invoke a method located on <strong>Animal</strong>.</p>
<pre><code>
    charlie.eat(10)


    /*
    1) JavaScript checks if charlie has an eat property - it doesn&#39;t.
    2) JavaScript then checks if Dog.prototype has an eat property
        - it doesn&#39;t.
    3) JavaScript then checks if Animal.prototype has an eat property
        - it does so it calls it.
    */
</code></pre><p>The reason <strong>Dog.prototype</strong> gets checked is because when we created a new instance of <strong>Dog</strong>, we used the <strong>new</strong> keyword. Under the hood, the <strong>this</strong> object that was created for us delegates to <strong>Dog.prototype</strong> (seen in comments below).</p>
<pre><code>function Dog (name, energy, breed) {
  // this = Object.create(Dog.prototype)
  Animal.call(this, name, energy)

  this.breed = breed
  // return this
}</code></pre><p>The reason <strong>Animal.prototype</strong> gets checked is because we overwrote <strong>Dog.prototype</strong> to delegate to <strong>Animal.prototype</strong> on failed lookups with this line</p>
<pre><code>Dog.prototype = Object.create(Animal.prototype)</code></pre><p>Now one thing we haven’t talked about is what if <strong>Dog</strong> has its own methods? Well, that’s a simple solution. Just like with <strong>Animal</strong>, if we want to share a method across all instances of that class, we add it to the function’s prototype.</p>
<pre><code>
    ...

    function Dog (name, energy, breed) {
      Animal.call(this, name, energy)

      this.breed = breed
    }

    Dog.prototype = Object.create(Animal.prototype)

    Dog.prototype.bark = function () {
      console.log(&#39;Woof Woof!&#39;)
      this.energy -= .1
    }
</code></pre><p>very nice. There’s just one small addition we need to make. If you remember back to the Beginner’s Guide to JavaScript’s Prototype post, we were able to get access to the instances’ constructor function by using <strong>instance.constructor</strong>.</p>
<pre><code>function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

const leo = new Animal(&#39;Leo&#39;, 7)
console.log(leo.constructor) // Logs the constructor function</code></pre><p>As explained in the previous post, “the reason this works is because any instances of <strong>Animal</strong> are going to delegate to <strong>Animal.prototype</strong> on failed lookups. So when you try to access <strong>leo.prototype</strong>, <strong>leo</strong> doesn’t have a <strong>prototype</strong> property so it will delegate that lookup to <strong>Animal.prototype</strong> which indeed does have a <strong>constructor</strong> property.”</p>
<p>The reason I bring this up is because in our implementation, we overwrote <strong>Dog.prototype</strong> with an object that delegates to <strong>Animal.prototype</strong>.</p>
<pre><code>function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

Dog.prototype = Object.create(Animal.prototype)

Dog.prototype.bark = function () {
  console.log(&#39;Woof Woof!&#39;)
  this.energy -= .1
}</code></pre><p>What that means is that now, any instances of <strong>Dog</strong> which log <strong>instance.constructor</strong> are going to get the <strong>Animal</strong> constructor rather than the <strong>Dog</strong> constructor. You can see for yourself by running this code -</p>
<pre><code>function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

Dog.prototype = Object.create(Animal.prototype)

Dog.prototype.bark = function () {
  console.log(&#39;Woof Woof!&#39;)
  this.energy -= .1
}

const charlie = new Dog(&#39;Charlie&#39;, 10, &#39;Goldendoodle&#39;)
console.log(charlie.constructor)</code></pre><p>Notice it gives you the <strong>Animal</strong> constructor even though <strong>charlie</strong> is a direct instance of <strong>Dog</strong>. Again, we can walk through what’s happening here just like we did above.</p>
<pre><code>
    const charlie = new Dog(&#39;Charlie&#39;, 10, &#39;Goldendoodle&#39;)
    console.log(charlie.constructor)

    /*
    1) JavaScript checks if charlie has a constructor property - it doesn&#39;t.
    2) JavaScript then checks if Dog.prototype has a constructor property
        - it doesn&#39;t because it was deleted when we overwrote Dog.prototype.
    3) JavaScript then checks if Animal.prototype has a constructor property
        - it does so it logs that.
    */</code></pre><p>How can we fix this? Well, it’s pretty simple. We can just add the correct <strong>constructor</strong> property to <strong>Dog.prototype</strong> once we overwrite it.</p>
<pre><code>function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

Dog.prototype = Object.create(Animal.prototype)

Dog.prototype.bark = function () {
  console.log(&#39;Woof Woof!&#39;)
  this.energy -= .1
}

Dog.prototype.constructor = Dog</code></pre><p>At this point if we wanted to make another subclass, say <strong>Cat</strong>, we’d follow the same pattern.</p>
<pre><code>function Cat (name, energy, declawed) {
  Animal.call(this, name, energy)

  this.declawed = declawed
}

Cat.prototype = Object.create(Animal.prototype)
Cat.prototype.constructor = Cat

Cat.prototype.meow = function () {
  console.log(&#39;Meow!&#39;)
  this.energy -= .1
}</code></pre><p>This concept of having a base class with subclasses that delegate to it is called inheritance and it’s a staple of Object Oriented Programming (OOP). If you’re coming from a different programming language, odds are you’re already familiar with OOP and inheritance. Before ES6 classes, in JavaScript, inheritance was quite the task as you can see above. You need to understand now only when to use inheritance, but also a nice mix of <strong>.call</strong>, <strong>Object.create</strong>, <strong>this</strong>, and <strong>FN.prototype</strong> - all pretty advanced JS topics. Let’s see how we’d accomplish the same thing using ES6 classes though.</p>
<p>First, let’s review what it looks like to go from an ES5 “class” to an ES6 class using our <strong>Animal</strong> class.</p>
<pre><code>function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

const leo = new Animal(&#39;Leo&#39;, 7)</code></pre><pre><code>
    class Animal {
      constructor(name, energy) {
        this.name = name
        this.energy = energy
      }
      eat(amount) {
        console.log(`${this.name} is eating.`)
        this.energy += amount
      }
      sleep() {
        console.log(`${this.name} is sleeping.`)
        this.energy += length
      }
      play() {
        console.log(`${this.name} is playing.`)
        this.energy -= length
      }
    }

    const leo = new Animal(&#39;Leo&#39;, 7)
</code></pre><p>Now that we’ve refactored our <strong>Animal</strong> constructor function into an ES6 class, the next thing we need to do is figure out how to refactor our base class (<strong>Dog</strong>). The good news is it’s much more intuitive. For reference, in ES5, here’s what we had.</p>
<pre><code>function Dog (name, energy, breed) {
  Animal.call(this, name, energy)

  this.breed = breed
}

Dog.prototype = Object.create(Animal.prototype)

Dog.prototype.bark = function () {
  console.log(&#39;Woof Woof!&#39;)
  this.energy -= .1
}

Dog.prototype.constructor = Dog</code></pre><p>Before we get into inheritance, let’s refactor <strong>Dog</strong> to use an ES6 class as we learned in a previous post.</p>
<pre><code>
    class Dog {
      constructor(name, energy, breed) {
        this.breed = breed
      }
      bark() {
        console.log(&#39;Woof Woof!&#39;)
        this.energy -= .1
      }
    }
</code></pre><p>Looks great. Now, let’s figure out how to make sure that <strong>Dog</strong> inherits from <strong>Animal</strong>. The first step we need to make is a pretty straight forward one. With ES6 classes, you can <strong>extend</strong> a base class with this syntax</p>
<pre><code>class Subclass extends Baseclass {}</code></pre><p>Translated into our example, that would make our <strong>Dog</strong> class look like this</p>
<pre><code>
    class Animal {
      constructor(name, energy) {
        this.name = name
        this.energy = energy
      }
      eat(amount) {
        console.log(`${this.name} is eating.`)
        this.energy += amount
      }
      sleep() {
        console.log(`${this.name} is sleeping.`)
        this.energy += length
      }
      play() {
        console.log(`${this.name} is playing.`)
        this.energy -= length
      }
    }

    class Dog extends Animal {
      constructor(name, energy, breed) {
        this.breed = breed
      }
      bark() {
        console.log(&#39;Woof Woof!&#39;)
        this.energy -= .1
      }
    }
</code></pre><p>In ES5 in order to make sure that every instance of <strong>Dog</strong> had a <strong>name</strong> and an <strong>energy</strong> property, we used <strong>.call</strong> in order to invoke the <strong>Animal</strong> constructor function in the context of the <strong>Dog</strong> instance. Luckily for us, in ES6 it’s much more straight forward. Whenever you are extending a baseclass and you need to invoke that baseclass’ constructor function, you invoke <strong>super</strong> passing it any arguments it needs. So in our example, our <strong>Dog</strong> constructor gets refactored to look like this</p>
<pre><code>
    class Animal {
      constructor(name, energy) {
        this.name = name
        this.energy = energy
      }
      eat(amount) {
        console.log(`${this.name} is eating.`)
        this.energy += amount
      }
      sleep() {
        console.log(`${this.name} is sleeping.`)
        this.energy += length
      }
      play() {
        console.log(`${this.name} is playing.`)
        this.energy -= length
      }
    }

    class Dog extends Animal {
      constructor(name, energy, breed) {
        super(name, energy) // calls Animal&#39;s constructor

        this.breed = breed
      }
      bark() {
        console.log(&#39;Woof Woof!&#39;)
        this.energy -= .1
      }
    }
</code></pre><p>And that’s it. No using <strong>.call</strong>, no using <strong>Object.create</strong>, no worrying about resetting <strong>constructor</strong> on the prototype - just <strong>extends</strong> the baseclass and make sure to call <strong>super</strong>.</p>
<p>What’s interesting about JavaScript is the same patterns you’ve learned these last few posts are directly caked into the language itself. Previously you learned that the reason all instances of Array have access to the array methods like <strong>pop</strong>, <strong>slice</strong>, <strong>filter</strong>, etc are because all of those methods live on <strong>Array.prototype</strong>.</p>
<pre><code>
    console.log(Array.prototype)

    /*
      concat: ƒn concat()
      constructor: ƒn Array()
      copyWithin: ƒn copyWithin()
      entries: ƒn entries()
      every: ƒn every()
      fill: ƒn fill()
      filter: ƒn filter()
      find: ƒn find()
      findIndex: ƒn findIndex()
      forEach: ƒn forEach()
      includes: ƒn includes()
      indexOf: ƒn indexOf()
      join: ƒn join()
      keys: ƒn keys()
      lastIndexOf: ƒn lastIndexOf()
      length: 0n
      map: ƒn map()
      pop: ƒn pop()
      push: ƒn push()
      reduce: ƒn reduce()
      reduceRight: ƒn reduceRight()
      reverse: ƒn reverse()
      shift: ƒn shift()
      slice: ƒn slice()
      some: ƒn some()
      sort: ƒn sort()
      splice: ƒn splice()
      toLocaleString: ƒn toLocaleString()
      toString: ƒn toString()
      unshift: ƒn unshift()
      values: ƒn values()
    */
</code></pre><p>You also learned that the reason all instances of <strong>Object</strong> have access to methods like <strong>hasOwnProperty</strong> and <strong>toString</strong> is because those methods live on <strong>Object.prototype</strong>.</p>
<pre><code>
    console.log(Object.prototype)

    /*
      constructor: ƒn Object()
      hasOwnProperty: ƒn hasOwnProperty()
      isPrototypeOf: ƒn isPrototypeOf()
      propertyIsEnumerable: ƒn propertyIsEnumerable()
      toLocaleString: ƒn toLocaleString()
      toString: ƒn toString()
      valueOf: ƒn valueOf()
    */
</code></pre><p>Here’s a challenge for you. With the list of Array methods and Object methods above, why does this code below work?</p>
<pre><code>
    const friends = [&#39;Mikenzi&#39;, &#39;Jake&#39;, &#39;Ean&#39;]

    friends.hasOwnProperty(&#39;push&#39;) // false
</code></pre><p>If you look at <strong>Array.prototype</strong>, there isn’t a <strong>hasOwnProperty</strong> method. Well if there isn’t a <strong>hasOwnProperty</strong> method located on <strong>Array.prototype</strong>, how does the <strong>friends</strong> array in the example above have access to <strong>hasOwnProperty</strong>? The reason for that is because the <strong>Array</strong> class extends the <strong>Object</strong> class. So in our example above, when JavaScript sees that <strong>friends</strong> doesn’t have a <strong>hasOwnProperty</strong> property, it checks if <strong>Array.prototype</strong> does. When <strong>Array.prototype</strong> doesn’t, it checks if <strong>Object.prototype</strong> does, then it invokes it. It’s the same process we’ve seen throughout this blog post.</p>
<p>JavaScript has two types - Primitive types and Reference types.</p>
<p>Primitive types are <strong>boolean</strong>, <strong>number</strong>, <strong>string</strong>, <strong>null</strong>, and <strong>undefined</strong> and are immutable. Everything else is a reference type and they all extend <strong>Object.prototype</strong>. That’s why you can add properties to functions and arrays and that’s why both functions and arrays have access to the methods located on <strong>Object.prototype</strong>.</p>
<pre><code>
    function speak(){}
    speak.woahFunctionsAreLikeObjects = true
    console.log(speak.woahFunctionsAreLikeObjects) // true

    const friends = [&#39;Mikenzi&#39;, &#39;Jake&#39;, &#39;Ean&#39;]
    friends.woahArraysAreLikeObjectsToo = true
    console.log(friends.woahArraysAreLikeObjectsToo) // true

</code></pre><p>–未完待续</p>

            </div>
            <hr/>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《JavaScript Inheritance and the Prototype Chain》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/2019/01/02/JavaScript Inheritance and the Prototype Chain/" property="cc:attributionName"
               rel="cc:attributionURL">
                shenlibing
            </a> 采用
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '7b42617f95211d5847fc',
        clientSecret: 'e272c54840e0b98ae6fda880655f266b1923bc3f',
        repo: 'shenlibing.github.io',
        owner: 'shenlibing',
        admin: "shenlibing",
        id: '2019-01-02T12-58-55',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2019/01/03/js开发者经常忽略的基础知识点/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="js开发者经常忽略的基础知识点">
                        
                        <span class="card-title">js开发者经常忽略的基础知识点</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            1、字符串匹配
匹配所有

// Mistake
// 踩到坑了
var str = "David is an Arsenal fan, which means David is great";
str.replace("David", "
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2019-01-03
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/前端/" class="post-category" target="_blank">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/js/" target="_blank">
                        <span class="chip bg-color">js</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/01/01/babel入门/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="babel入门">
                        
                        <span class="card-title">babel入门</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            1、babel

Babel is a toolchain that is mainly used to convert ECMAScript 2015+ code into a backwards compatible version o
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-01-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/开发工具/" class="post-category" target="_blank">
                                    开发工具
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/babel/" target="_blank">
                        <span class="chip bg-color">babel</span>
                    </a>
                    
                    <a href="/tags/npm/" target="_blank">
                        <span class="chip bg-color">npm</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1,h2, h3, h4,h5,h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1,h2, h3, h4,h5,h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://github.com/shenlibing" target="_blank">shenlibing</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


</body>
</html>